---
import { Icon } from 'astro-icon/components';

const navigation = [
    { name: 'Kasutusjuhend', href: '#kasutusjuhend', icon: 'lucide:book-open' },
    { name: 'KKK', href: '#kkk', icon: 'lucide:help-circle' },
    { name: 'Vead', href: '#vead', icon: 'lucide:bug' },
    { name: 'Funktsioonid', href: '#funktsioonid', icon: 'lucide:sparkles' },
    { name: 'Minust', href: '#minust', icon: 'lucide:user-circle' },
    { name: 'Privaatsuspoliitika', href: '#privaatsuspoliitika', icon: 'lucide:file-text' },
];
---

<header class="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
    <nav class="container mx-auto px-8 lg:px-16">
        <div class="flex h-16 items-center justify-between">
            <!-- Logo -->
            <a href="/" class="flex items-center gap-2 group">
                <Icon name="lucide:camera" class="h-8 w-8 text-theme transition-transform group-hover:scale-110" />
                <span class="text-2xl font-black tracking-tight text-theme">Lasteaiapildid</span>
            </a>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex md:items-center md:space-x-6">
                {navigation.map(item => (
                    <a
                        href={item.href}
                        class="nav-link flex items-center gap-1.5 text-sm font-medium text-muted-foreground transition-colors hover:text-foreground cursor-pointer"
                    >
                        <Icon name={item.icon} class="h-4 w-4" />
                        {item.name}
                    </a>
                ))}
            </div>

            <!-- Mobile menu button -->
            <button
                id="mobile-menu-button"
                class="md:hidden rounded-md p-2 text-muted-foreground hover:bg-muted hover:text-foreground"
                aria-label="Ava menüü"
                aria-expanded="false"
            >
                <Icon id="menu-icon" name="lucide:menu" class="h-6 w-6" />
                <Icon id="close-icon" name="lucide:x" class="h-6 w-6 hidden" />
            </button>
        </div>

        <!-- Mobile Navigation -->
        <div id="mobile-menu" class="hidden md:hidden py-4 border-t">
            <div class="flex flex-col space-y-4">
                {navigation.map(item => (
                    <a
                        href={item.href}
                        class="nav-link flex items-center gap-2 text-sm font-medium text-muted-foreground transition-colors hover:text-foreground cursor-pointer"
                    >
                        <Icon name={item.icon} class="h-4 w-4" />
                        {item.name}
                    </a>
                ))}
            </div>
        </div>
    </nav>
</header>

<script>
    // Mobile menu toggle
    const button = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');

    button?.addEventListener('click', () => {
        const isOpen = menu?.classList.contains('hidden');

        if (isOpen) {
            menu?.classList.remove('hidden');
            menuIcon?.classList.add('hidden');
            closeIcon?.classList.remove('hidden');
            button?.setAttribute('aria-expanded', 'true');
            button?.setAttribute('aria-label', 'Sulge menüü');
        } else {
            menu?.classList.add('hidden');
            menuIcon?.classList.remove('hidden');
            closeIcon?.classList.add('hidden');
            button?.setAttribute('aria-expanded', 'false');
            button?.setAttribute('aria-label', 'Ava menüü');
        }
    });

    // Smooth scroll for all nav links
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const href = link.getAttribute('href');
            if (href?.startsWith('#')) {
                const element = document.querySelector(href);
                element?.scrollIntoView({ behavior: 'smooth', block: 'start' });

                // Close mobile menu if open
                menu?.classList.add('hidden');
                menuIcon?.classList.remove('hidden');
                closeIcon?.classList.add('hidden');
                button?.setAttribute('aria-expanded', 'false');
                button?.setAttribute('aria-label', 'Ava menüü');
            }
        });
    });
</script>
